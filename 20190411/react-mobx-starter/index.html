<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
    

    

    



    <meta charset="utf-8">
    
    
    
    
    <title>从零开始搭建一个 React + Mobx + React Router 脚手架 | 前端小栈 | 因为有了危机感，所以会义无反顾。</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="React,Webpack,前端开发">
    <meta name="description" content="本文详细介绍了如何从零开始搭建一个 React 开发的脚手架，包含如何添加 Redux 以及 React Router 的环境。">
<meta name="keywords" content="React,Webpack,前端开发">
<meta property="og:type" content="article">
<meta property="og:title" content="从零开始搭建一个 React + Mobx + React Router 脚手架">
<meta property="og:url" content="https://beichensky.github.io/20190411/react-mobx-starter/index.html">
<meta property="og:site_name" content="前端小栈">
<meta property="og:description" content="本文详细介绍了如何从零开始搭建一个 React 开发的脚手架，包含如何添加 Redux 以及 React Router 的环境。">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://beichensky.github.io/images/react-mobx-starter/Home.png">
<meta property="og:image" content="https://beichensky.github.io/images/react-mobx-starter/Settings.png">
<meta property="og:image" content="https://beichensky.github.io/images/react-mobx-starter/Display.png">
<meta property="og:image" content="https://beichensky.github.io/images/react-mobx-starter/NotFound.png">
<meta property="og:image" content="https://beichensky.github.io/images/react-mobx-starter/nginxConf">
<meta property="og:updated_time" content="2019-08-03T09:27:33.914Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="从零开始搭建一个 React + Mobx + React Router 脚手架">
<meta name="twitter:description" content="本文详细介绍了如何从零开始搭建一个 React 开发的脚手架，包含如何添加 Redux 以及 React Router 的环境。">
<meta name="twitter:image" content="https://beichensky.github.io/images/react-mobx-starter/Home.png">
    
        <link rel="alternate" type="application/atom+xml" title="前端小栈" href="/atom.xml">
    
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide">
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">卢凡凡</h5>
          <a href="mailto:1376286204@qq.com" title="1376286204@qq.com" class="mail">1376286204@qq.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/">
                <i class="icon icon-lg icon-home"></i>
                Home
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives">
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags">
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories">
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/Lufanfan" target="_blank">
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=1376286204@qq.com" target="_blank">
                <i class="icon icon-lg icon-envelope"></i>
                Email
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">从零开始搭建一个 React + Mobx + React Router 脚手架</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">从零开始搭建一个 React + Mobx + React Router 脚手架</h1>
        <h5 class="subtitle">
            
                <time datetime="2019-04-11T07:17:53.000Z" itemprop="datePublished" class="page-time">
  2019-04-11
</time>


            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#一、前情提要"><span class="post-toc-number">1.</span> <span class="post-toc-text">一、前情提要</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#二、创建项目结构"><span class="post-toc-number">2.</span> <span class="post-toc-text">二、创建项目结构</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#三、React-开发环境配置"><span class="post-toc-number">3.</span> <span class="post-toc-text">三、React 开发环境配置</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#安装-webpack-相关插件"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">安装 webpack 相关插件</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#入口和出口"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">入口和出口</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#添加-html-webpack-plugin-插件"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">添加 html-webpack-plugin 插件</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#安装-html-webpack-plugin-插件"><span class="post-toc-number">3.3.1.</span> <span class="post-toc-text">安装 html-webpack-plugin 插件</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#使用-html-webpack-plugin-插件"><span class="post-toc-number">3.3.2.</span> <span class="post-toc-text">使用 html-webpack-plugin 插件</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#设置开发模式"><span class="post-toc-number">3.4.</span> <span class="post-toc-text">设置开发模式</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#设置-devtool"><span class="post-toc-number">3.5.</span> <span class="post-toc-text">设置 devtool</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#使用-webpack-dev-server-启动项目服务"><span class="post-toc-number">3.6.</span> <span class="post-toc-text">使用 webpack-dev-server 启动项目服务</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#安装-webpack-dev-server"><span class="post-toc-number">3.6.1.</span> <span class="post-toc-text">安装 webpack-dev-server</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#配置-webpack-dev-server"><span class="post-toc-number">3.6.2.</span> <span class="post-toc-text">配置 webpack-dev-server</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#使用-friendly-errors-webpack-plugin-插件"><span class="post-toc-number">3.7.</span> <span class="post-toc-text">使用 friendly-errors-webpack-plugin 插件</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#启用热加载"><span class="post-toc-number">3.8.</span> <span class="post-toc-text">启用热加载</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#运行项目，测试配置成果"><span class="post-toc-number">3.8.1.</span> <span class="post-toc-text">运行项目，测试配置成果</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#配置-babel"><span class="post-toc-number">3.9.</span> <span class="post-toc-text">配置 babel</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#安装-babel-相关插件"><span class="post-toc-number">3.9.1.</span> <span class="post-toc-text">安装 babel 相关插件</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#使用-babel-loader"><span class="post-toc-number">3.9.2.</span> <span class="post-toc-text">使用 babel-loader</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#在项目根目录下新建-babelrc-文件"><span class="post-toc-number">3.9.3.</span> <span class="post-toc-text">在项目根目录下新建 .babelrc 文件</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#使用-babel-相关-presets"><span class="post-toc-number">3.9.4.</span> <span class="post-toc-text">使用 babel 相关 presets</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#使用-babel-相关-plugins"><span class="post-toc-number">3.9.5.</span> <span class="post-toc-text">使用 babel 相关 plugins</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#添加-css-相关-loader"><span class="post-toc-number">3.10.</span> <span class="post-toc-text">添加 css 相关 loader</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#安装相关插件："><span class="post-toc-number">3.10.1.</span> <span class="post-toc-text">安装相关插件：</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#配置样式相关-loader"><span class="post-toc-number">3.10.2.</span> <span class="post-toc-text">配置样式相关 loader</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#添加其他模块解析-loader-配置"><span class="post-toc-number">3.11.</span> <span class="post-toc-text">添加其他模块解析 loader 配置</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#额外的-webpack-配置优化"><span class="post-toc-number">3.12.</span> <span class="post-toc-text">额外的 webpack 配置优化</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#添加-resolve-allias-属性，设置别名"><span class="post-toc-number">3.12.1.</span> <span class="post-toc-text">添加 resolve allias 属性，设置别名</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#添加-resolve-modules-属性，指明第三方模块存放位置"><span class="post-toc-number">3.12.2.</span> <span class="post-toc-text">添加 resolve.modules 属性，指明第三方模块存放位置</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#安装-React、MObx-以及-React-Router-相关插件"><span class="post-toc-number">3.13.</span> <span class="post-toc-text">安装 React、MObx 以及 React Router 相关插件</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#引入-antd"><span class="post-toc-number">3.14.</span> <span class="post-toc-text">引入 antd</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#四、进行-React-开发"><span class="post-toc-number">4.</span> <span class="post-toc-text">四、进行 React 开发</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#修改根目录下的-index-js-文件"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">修改根目录下的 index.js 文件</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#使用-React-Route-进行页面间路由跳转"><span class="post-toc-number">4.2.</span> <span class="post-toc-text">使用 React Route 进行页面间路由跳转</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#在-src-目录下新建-App-js-文件："><span class="post-toc-number">4.2.1.</span> <span class="post-toc-text">在 src 目录下新建 App.js 文件：</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#在-pages-目录下编写-Home、Settings、Display、NotFound-组件"><span class="post-toc-number">4.2.2.</span> <span class="post-toc-text">在 pages 目录下编写 Home、Settings、Display、NotFound 组件</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#再修改一下-index-js-文件"><span class="post-toc-number">4.2.3.</span> <span class="post-toc-text">再修改一下 index.js 文件</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#添加-fetch-工具类进行网络请求"><span class="post-toc-number">4.3.</span> <span class="post-toc-text">添加 fetch 工具类进行网络请求</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#安装-fetch-相关插件："><span class="post-toc-number">4.3.1.</span> <span class="post-toc-text">安装 fetch 相关插件：</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#编写网络请求工具类"><span class="post-toc-number">4.3.2.</span> <span class="post-toc-text">编写网络请求工具类</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#至此，简单的-React-框架搭建完成了"><span class="post-toc-number">4.4.</span> <span class="post-toc-text">至此，简单的 React 框架搭建完成了</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#五、进行-React-项目打包配置"><span class="post-toc-number">5.</span> <span class="post-toc-text">五、进行 React 项目打包配置</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#先在-package-json-文件中新增一个执行脚本："><span class="post-toc-number">5.1.</span> <span class="post-toc-text">先在 package.json 文件中新增一个执行脚本：</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#配置-webpack-config-prod-js-文件"><span class="post-toc-number">5.2.</span> <span class="post-toc-text">配置 webpack.config.prod.js 文件</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#添加-optimization-属性进行代码压缩"><span class="post-toc-number">5.2.1.</span> <span class="post-toc-text">添加 optimization 属性进行代码压缩</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#使用-mini-css-extract-plugin-插件提取-CSS-代码"><span class="post-toc-number">5.2.2.</span> <span class="post-toc-text">使用 mini-css-extract-plugin 插件提取 CSS 代码</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#使用-DefinePlugin-插件定义当前为生产环境"><span class="post-toc-number">5.2.3.</span> <span class="post-toc-text">使用 DefinePlugin 插件定义当前为生产环境</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#使用-clean-webpack-plugin-清理-dist-目录"><span class="post-toc-number">5.2.4.</span> <span class="post-toc-text">使用 clean-webpack-plugin 清理 dist 目录</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#添加其他优化配置"><span class="post-toc-number">5.2.5.</span> <span class="post-toc-text">添加其他优化配置</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#进行项目的打包发布"><span class="post-toc-number">5.3.</span> <span class="post-toc-text">进行项目的打包发布</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#打包项目"><span class="post-toc-number">5.3.1.</span> <span class="post-toc-text">打包项目</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#使用-Nginx-发布项目"><span class="post-toc-number">5.3.2.</span> <span class="post-toc-text">使用 Nginx 发布项目</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#六、使用-webpack-merge-引入webpack-公共配置"><span class="post-toc-number">6.</span> <span class="post-toc-text">六、使用 webpack-merge 引入webpack 公共配置</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#七、本文源码地址"><span class="post-toc-number">7.</span> <span class="post-toc-text">七、本文源码地址</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#八、参考文档："><span class="post-toc-number">8.</span> <span class="post-toc-text">八、参考文档：</span></a></li></ol>
        </nav>
    </aside>


<article id="post-react-mobx-starter" class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">从零开始搭建一个 React + Mobx + React Router 脚手架</h1>
        <div class="post-meta">
            <time class="post-time" title="2019-04-11 15:17:53" datetime="2019-04-11T07:17:53.000Z" itemprop="datePublished">2019-04-11</time>

            


            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style="display:none">
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <p>本文详细介绍了如何从零开始搭建一个 React 开发的脚手架，包含如何添加 Redux 以及 React Router 的环境。</p>
<a id="more"></a>
<p><strong>本文代码地址：<a href="https://github.com/beichensky/react-mobx-starter" target="_blank" rel="noopener">react-mobx-starter</a>。</strong></p>
<p>建议将代码拉下来之后，配合本文一起查看，效果更佳。</p>
<p>代码下载命令：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/beichensky/react-mobx-starter.git</span><br></pre></td></tr></table></figure></p>
<h2 id="一、前情提要"><a href="#一、前情提要" class="headerlink" title="一、前情提要"></a>一、前情提要</h2><p>本文的 <code>Demo</code> 分为两个环境，一个是开发环境，另一个是生产环境。</p>
<ul>
<li>开发环境中讲述的是如何配置出一个更好的、更方便的开发环境；</li>
<li>而生产环境中讲述的是如何配置出一个更优化、更小版本的生产环境。</li>
</ul>
<p>之前我也就 <code>Webpack</code> 的使用写了几篇文章，本文也是在 <code>Webpack</code> 的基础上进行开发，也是在之前的代码上进行的扩展。</p>
<ul>
<li><p>开发环境的配置是在 <a href="https://juejin.im/post/5c51520cf265da61180215e5" target="_blank" rel="noopener">从零开始搭建一个 Webpack 开发环境配置（附 Demo）</a> 一文的基础上进行的扩展。</p>
</li>
<li><p>生产环境的配置是在 <a href="https://juejin.im/post/5c5407296fb9a049bb7cc4ee" target="_blank" rel="noopener">使用 Webpack 进行生产环境配置（附 Demo）</a> 一文的基础上进行的扩展。</p>
</li>
</ul>
<p>建议：对于 Webpack 还不了解的朋友，可以先看一下 <a href="https://juejin.im/post/5c51520cf265da61180215e5" target="_blank" rel="noopener">从零开始搭建一个 Webpack 开发环境配置（附 Demo）</a> 和 <a href="https://juejin.im/post/5c5407296fb9a049bb7cc4ee" target="_blank" rel="noopener">使用 Webpack 进行生产环境配置（附 Demo）</a> 这两篇文章，可以更好的入手本文。</p>
<blockquote>
<p>虽然本文是在之前文章上进行的扩展，但本文还是会详细的介绍每一步的配置。</p>
</blockquote>
<hr>
<h2 id="二、创建项目结构"><a href="#二、创建项目结构" class="headerlink" title="二、创建项目结构"></a>二、创建项目结构</h2><p>新建文件夹，命名为：<code>react-mobx-starter</code><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir react-mobx-starter</span><br></pre></td></tr></table></figure></p>
<p>初始化 <code>package.json</code> 文件<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> react-mobx-starter</span><br><span class="line"></span><br><span class="line"><span class="comment"># 直接生成默认的 package.json 文件</span></span><br><span class="line">npm init -y</span><br></pre></td></tr></table></figure></p>
<p>创建 <code>src</code> 目录，用来存放我们编写的代码<br>创建 <code>public</code> 目录，用来存放公共的文件<br>创建 <code>webpack</code> 目录，用来存放 <code>webpack</code> 配置文件<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mkdir src</span><br><span class="line"></span><br><span class="line">mkdir public</span><br><span class="line"></span><br><span class="line">mkdir webpack</span><br></pre></td></tr></table></figure></p>
<p>在 src 目录下<br>新建 pages 文件夹，用来存放书写的页面组件<br>新建 components 文件夹，用来存放公共组件<br>新建 utils 文件夹，用来存放常用的工具类<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> src</span><br><span class="line"></span><br><span class="line">mkdir pages</span><br><span class="line"></span><br><span class="line">mkdir components</span><br><span class="line"></span><br><span class="line">mkdir utils</span><br></pre></td></tr></table></figure></p>
<p>在 <code>public</code> 目录下新建 <code>index.html</code> 文件<br>在 <code>src</code> 目录下新建 <code>index.js</code> 文件<br>在 <code>webpack</code> 目录下创建 <code>webpack.config.dev.js</code> 和 <code>webpack.config.prod.js</code></p>
<ul>
<li><code>webpack.config.dev.js</code> 用来编写 webpack 开发环境配置</li>
<li><code>webpack.config.prod.js</code> 用来编写 webpack 生产环境配置</li>
</ul>
<p>index.html<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>React + Mobx 全家桶脚手架<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>index.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createElement</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> ele = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">    ele.innerHTML = <span class="string">'Hello, React'</span>;</span><br><span class="line">    <span class="keyword">const</span> root = <span class="built_in">document</span>.querySelector(<span class="string">'#root'</span>);</span><br><span class="line">    root.appendChild(ele);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">createElement();</span><br></pre></td></tr></table></figure></p>
<p><code>webpack.config.dev.js</code> 和 <code>webpack.config.prod.js</code> 此时还没有书写内容，我们之后会详细的进行讲述。</p>
<p>我们看一下此时的项目结构，之后就可以进行 webpack 的配置了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">react-mobx-starter</span><br><span class="line">  ├─ public/</span><br><span class="line">    └─ index.html</span><br><span class="line">  ├─ src/</span><br><span class="line">    ├─ components/</span><br><span class="line">    ├─ pages/</span><br><span class="line">    ├─ utils/</span><br><span class="line">    └─ index.js</span><br><span class="line">  ├─ webpack/</span><br><span class="line">    ├─ webpack.config.dev.js</span><br><span class="line">    └─webpack.config.prod.js</span><br><span class="line">  ├─ package.json</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="三、React-开发环境配置"><a href="#三、React-开发环境配置" class="headerlink" title="三、React 开发环境配置"></a>三、React 开发环境配置</h2><p>在 package.json 文件中添加一个执行脚本，用来执行 webpack 命令：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    ...,</span><br><span class="line">    "scripts": &#123;</span><br><span class="line">        "start": "webpack --config webpack/webpack.config.dev.js"</span><br><span class="line">    &#125;,</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="安装-webpack-相关插件"><a href="#安装-webpack-相关插件" class="headerlink" title="安装 webpack 相关插件"></a>安装 webpack 相关插件</h3><p>安装 webpack 和 webpack-cli<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install webpack webpack-cli --save-dev</span><br></pre></td></tr></table></figure></p>
<h3 id="入口和出口"><a href="#入口和出口" class="headerlink" title="入口和出口"></a>入口和出口</h3><p>使用 webpack 进行项目配置的时候，必须要有入口和出口，作为模块引入和项目输出。</p>
<p>webpack.config.dev.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> appSrc = path.resolve(__dirname, <span class="string">'../src'</span>);</span><br><span class="line"><span class="keyword">const</span> appDist = path.resolve(__dirname, <span class="string">'../dist'</span>);</span><br><span class="line"><span class="keyword">const</span> appPublic = path.resolve(__dirname, <span class="string">'../public'</span>);</span><br><span class="line"><span class="keyword">const</span> appIndex = path.resolve(appSrc, <span class="string">'index.js'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    entry: appIndex,</span><br><span class="line">    output: &#123;</span><br><span class="line">        filename: <span class="string">'public/js/[name].[hash:8].js'</span>,</span><br><span class="line">        path: dist,</span><br><span class="line">        publicPath: <span class="string">'/'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="添加-html-webpack-plugin-插件"><a href="#添加-html-webpack-plugin-插件" class="headerlink" title="添加 html-webpack-plugin 插件"></a>添加 html-webpack-plugin 插件</h3><p>执行 npm run start 脚本，可以看到 <code>dist/public/js</code> 目录下多了一个 <code>js</code> 文件，但是这个是由 <code>hash</code> 值命名的的，我们每次都手动引入到 index.html 文件里面过于麻烦，所以可以引入 <code>html-webpack-plugin</code> 插件。</p>
<p> html-webpack-plugin 插件有两个作用</p>
<ul>
<li>可以将 <code>public</code> 目录下的文件夹拷贝到 <code>dist</code> 输出文件夹下</li>
<li>可以自动将 <code>dist</code> 下的 <code>js</code> 文件引入到 <code>html</code> 文件中</li>
</ul>
<h4 id="安装-html-webpack-plugin-插件"><a href="#安装-html-webpack-plugin-插件" class="headerlink" title="安装 html-webpack-plugin 插件"></a>安装 <code>html-webpack-plugin</code> 插件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install html-webpack-plugin --save-dev</span><br></pre></td></tr></table></figure>
<h4 id="使用-html-webpack-plugin-插件"><a href="#使用-html-webpack-plugin-插件" class="headerlink" title="使用 html-webpack-plugin 插件"></a>使用 <code>html-webpack-plugin</code> 插件</h4><p>webpack.config.dev.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line">+ <span class="keyword">const</span> HTMLWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> appSrc = path.resolve(__dirname, <span class="string">'../src'</span>);</span><br><span class="line"><span class="keyword">const</span> appDist = path.resolve(__dirname, <span class="string">'../dist'</span>);</span><br><span class="line"><span class="keyword">const</span> appPublic = path.resolve(__dirname, <span class="string">'../public'</span>);</span><br><span class="line"><span class="keyword">const</span> appIndex = path.resolve(appSrc, <span class="string">'index.js'</span>);</span><br><span class="line">+ <span class="keyword">const</span> appHtml = path.resolve(appPublic, <span class="string">'index.html'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    entry: appIndex,</span><br><span class="line">    output: &#123;</span><br><span class="line">        filename: <span class="string">'public/js/[name].[hash:8].js'</span>,</span><br><span class="line">        path: appDist,</span><br><span class="line">        publicPath: <span class="string">'/'</span></span><br><span class="line">    &#125;,</span><br><span class="line">+    plugins: [</span><br><span class="line">+        <span class="keyword">new</span> HTMLWebpackPlugin(&#123;</span><br><span class="line">+            template: appHtml,</span><br><span class="line">+            filename: <span class="string">'index.html'</span></span><br><span class="line">+        &#125;)</span><br><span class="line">+    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="设置开发模式"><a href="#设置开发模式" class="headerlink" title="设置开发模式"></a>设置开发模式</h3><p>webpack 配置中的 mode 属性，可以设置为 ‘development’ 和 ‘production’，我们目前是进行开发环境配置，所以可以设置为 ‘development’</p>
<p>webpack.config.dev.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">+    mode: <span class="string">'development'</span>,</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="设置-devtool"><a href="#设置-devtool" class="headerlink" title="设置 devtool"></a>设置 devtool</h3><p>为了方便在项目出错时，迅速定位到错误位置，可以设置 devtool，生成资源映射，我们这里使用 <code>inline-source-map</code>，更多选择可以在<a href="https://juejin.im/post/5c51520cf265da61180215e5#heading-10" target="_blank" rel="noopener">这里</a>查看区别。</p>
<p>webpack.config.dev.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    mode: <span class="string">'development'</span>,</span><br><span class="line">+    devtool: <span class="string">'inline-source-map'</span>,</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="使用-webpack-dev-server-启动项目服务"><a href="#使用-webpack-dev-server-启动项目服务" class="headerlink" title="使用 webpack-dev-server 启动项目服务"></a>使用 webpack-dev-server 启动项目服务</h3><h4 id="安装-webpack-dev-server"><a href="#安装-webpack-dev-server" class="headerlink" title="安装 webpack-dev-server"></a>安装 webpack-dev-server</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install webpack-dev-server --save-dev</span><br></pre></td></tr></table></figure>
<h4 id="配置-webpack-dev-server"><a href="#配置-webpack-dev-server" class="headerlink" title="配置 webpack-dev-server"></a>配置 webpack-dev-server</h4><p>webpack.config.dev.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    mode: <span class="string">'development'</span>,</span><br><span class="line">    devtool: <span class="string">'inline-source-map'</span>,</span><br><span class="line">+    devServer: &#123;</span><br><span class="line">+        contentBase: appPublic,</span><br><span class="line">+        hot: <span class="literal">true</span>,</span><br><span class="line">+        host: <span class="string">'localhost'</span>,</span><br><span class="line">+        port: <span class="number">8000</span>,</span><br><span class="line">+        historyApiFallback: <span class="literal">true</span>,</span><br><span class="line">+        <span class="comment">// 是否将错误展示在浏览器蒙层</span></span><br><span class="line">+        overlay: <span class="literal">true</span>,</span><br><span class="line">+        inline: <span class="literal">true</span>,</span><br><span class="line">+        <span class="comment">// 打印信息</span></span><br><span class="line">+        stats: <span class="string">'errors-only'</span>,</span><br><span class="line">+        <span class="comment">// 设置代理</span></span><br><span class="line">+        proxy: &#123;</span><br><span class="line">+            <span class="string">'/api'</span>: &#123;</span><br><span class="line">+                changeOrigin: <span class="literal">true</span>,</span><br><span class="line">+                target: <span class="string">'https://easy-mock.com/mock/5c2dc9665cfaa5209116fa40/example'</span>,</span><br><span class="line">+                pathRewrite: &#123;</span><br><span class="line">+                    <span class="string">'^/api/'</span>: <span class="string">'/'</span></span><br><span class="line">+                &#125;</span><br><span class="line">+            &#125;</span><br><span class="line">+        &#125;</span><br><span class="line">+    &#125;,</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>修改一下 <code>package.json</code> 文件中的 <code>start</code> 脚本：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    ...,</span><br><span class="line">    "scripts": &#123;</span><br><span class="line">        "start": "webpack-dev-server --config webpack/webpack.config.dev.js"</span><br><span class="line">    &#125;,</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="使用-friendly-errors-webpack-plugin-插件"><a href="#使用-friendly-errors-webpack-plugin-插件" class="headerlink" title="使用 friendly-errors-webpack-plugin 插件"></a>使用 friendly-errors-webpack-plugin 插件</h3><p><code>friendly-errors-webpack-plugin</code> 插件可以在命令行展示更有好的提示功能。</p>
<p>安装 <code>friendly-errors-webpack-plugin</code>：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install friendly-errors-webpack-plugin --save-dev</span><br></pre></td></tr></table></figure></p>
<p>使用 <code>friendly-errors-webpack-plugin</code>：</p>
<p>webpack.config.dev.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> HTMLWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</span><br><span class="line">+ <span class="keyword">const</span> FriendlyErrorsWebpackPlugin = <span class="built_in">require</span>(<span class="string">'friendly-errors-webpack-plugin'</span>);</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    ...</span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="keyword">new</span> HTMLWebpackPlugin(&#123;</span><br><span class="line">            template: appHtml,</span><br><span class="line">            filename: <span class="string">'index.html'</span></span><br><span class="line">        &#125;),</span><br><span class="line">+        <span class="keyword">new</span> FriendlyErrorsWebpackPlugin(),</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="启用热加载"><a href="#启用热加载" class="headerlink" title="启用热加载"></a>启用热加载</h3><p>webpack.config.dev.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> HTMLWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> FriendlyErrorsWebpackPlugin = <span class="built_in">require</span>(<span class="string">'friendly-errors-webpack-plugin'</span>);</span><br><span class="line">+ <span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    ...</span><br><span class="line">    plugins: [</span><br><span class="line">        ...</span><br><span class="line">        <span class="keyword">new</span> FriendlyErrorsWebpackPlugin(),</span><br><span class="line">+        <span class="keyword">new</span> webpack.HotModuleReplacementPlugin()</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="运行项目，测试配置成果"><a href="#运行项目，测试配置成果" class="headerlink" title="运行项目，测试配置成果"></a>运行项目，测试配置成果</h4><p>执行 <code>npm run start</code> 命令，命令行提示成功后，在浏览器打开 <code>http://localhost:8000</code>，可以看到 <code>Hello React</code>，说明基本的Webpack 配置已经成功了。</p>
<h3 id="配置-babel"><a href="#配置-babel" class="headerlink" title="配置 babel"></a>配置 babel</h3><p>我们现在 <code>index.js</code> 里面的代码量比较少，所以没有问题。但是我如果想在里面使用一些 ES6 的语法或者是还未被标准定义的 JS 特性，那么我们就需要使用 babel 来进行转换了。下面我们来配置一下 <code>babel</code>。</p>
<h4 id="安装-babel-相关插件"><a href="#安装-babel-相关插件" class="headerlink" title="安装 babel 相关插件"></a>安装 babel 相关插件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install babel-core babel-loader@7 --save-dev</span><br></pre></td></tr></table></figure>
<h4 id="使用-babel-loader"><a href="#使用-babel-loader" class="headerlink" title="使用 babel-loader"></a>使用 babel-loader</h4><p>设置 cacheDirectory 属性，指定的目录将用来缓存 loader 的执行结果。之后的 webpack 构建，将会尝试读取缓存，来避免在每次执行时，可能产生的、高性能消耗的 Babel 重新编译过程。</p>
<p>webpack.config.dev.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    ...</span><br><span class="line">    plugins: [ ... ],</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.(js|jsx)$/</span>,</span><br><span class="line">                loader: <span class="string">'babel-loader?cacheDirectory'</span>,</span><br><span class="line">                include: [ appSrc ],</span><br><span class="line">                exclude: <span class="regexp">/node_modules/</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="在项目根目录下新建-babelrc-文件"><a href="#在项目根目录下新建-babelrc-文件" class="headerlink" title="在项目根目录下新建 .babelrc 文件"></a>在项目根目录下新建 .babelrc 文件</h4><p><code>.babelrc</code> 文件是运行时控制文件，在项目编译的时候会自动读取 <code>.babelrc</code> 文件中的 <code>babel</code> 配置。</p>
<h4 id="使用-babel-相关-presets"><a href="#使用-babel-相关-presets" class="headerlink" title="使用 babel 相关 presets"></a>使用 babel 相关 presets</h4><p>安装相关插件：</p>
<ul>
<li><code>babel-preset-env</code>：可以在项目中使用所有 <code>ECMAScript</code> 标准里的最新特性。</li>
<li><code>babel-preset-stage0</code>：可以在项目中使用社区提出来的但还未被写入 <code>ECMAScript</code> 标准里的特性。</li>
<li><code>babel-preset-react</code>：可以在项目中使用 <code>react</code> 语法。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install babel-preset-env babel-preset-stage-0 babel-preset-react --save-dev</span><br></pre></td></tr></table></figure>
<p>配置 <code>.babelrc</code> 文件：<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"presets"</span>: [</span><br><span class="line">        <span class="string">"env"</span>,</span><br><span class="line">        <span class="string">"stage-0"</span>,</span><br><span class="line">        <span class="string">"react"</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="使用-babel-相关-plugins"><a href="#使用-babel-相关-plugins" class="headerlink" title="使用 babel 相关 plugins"></a>使用 babel 相关 plugins</h4><p>安装相关插件：</p>
<ul>
<li><code>babel-plugin-transform-decorators-legacy</code>：可以在项目中使用装饰器语法。</li>
<li><code>babel-plugin-transform-class-properties</code>：可以在项目中使用新的 class 属性语法。</li>
<li><code>babel-plugin-transform-runtime</code>：使用此插件可以直接使用 babel-runtime 中的代码对 <code>js</code> 文件进行转换，避免代码冗余。</li>
<li><code>babel-runtime</code>：配合 <code>babel-plugin-transform-runtime</code> 插件成对使用</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install  babel-plugin-transform-decorators-legacy babel-plugin-transform-class-properties babel-plugin-transform-runtime babel-runtime --save-dev</span><br></pre></td></tr></table></figure>
<p>配置 <code>.babelrc</code> 文件：<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"presets"</span>: [</span><br><span class="line">        <span class="string">"env"</span>,</span><br><span class="line">        <span class="string">"stage-0"</span>,</span><br><span class="line">        <span class="string">"react"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"plugins"</span>: [</span><br><span class="line">        <span class="string">"transform-decorators-legacy"</span>,</span><br><span class="line">        <span class="string">"transform-runtime"</span>,</span><br><span class="line">        <span class="string">"transform-class-properties"</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>这里需要注意 <code>transform-decorators-legacy</code> 插件的放置顺序，最好放在第一位，否则可能会出现某些注解失效的问题。</p>
</blockquote>
<p>至此，babel 相关的基本配置完成了。之后我们就可以在项目中肆意使用各种新的 JS 特性了。</p>
<h3 id="添加-css-相关-loader"><a href="#添加-css-相关-loader" class="headerlink" title="添加 css 相关 loader"></a>添加 css 相关 loader</h3><p><code>js</code> 文件相关的 <code>babel-loader</code> 配置好了，但是有时候我们想在项目中为元素添加一些样式，而 <code>webpack</code> 中认为一切都是模块，所以我们这时候也需要别的 <code>loader</code> 来解析一波样式代码了。</p>
<h4 id="安装相关插件："><a href="#安装相关插件：" class="headerlink" title="安装相关插件："></a>安装相关插件：</h4><ul>
<li><code>css-loader</code>：处理 <code>css</code> 文件中的 <code>url()</code> 等。</li>
<li><code>style-loader</code>：将 <code>css</code> 插入到页面的 <code>style</code> 标签。</li>
<li><code>less-loader</code>：是将 <code>less</code> 文件编译成 <code>css</code>。</li>
<li><code>postcss-loader</code>：可以集成很多插件，用来操作 <code>css</code>。我们这里使用它集成 <code>autoprefixer</code> 来自动添加前缀。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install css-loader style-loader less less-loader postcss-loader autoprefixer --save-dev</span><br></pre></td></tr></table></figure>
<h4 id="配置样式相关-loader"><a href="#配置样式相关-loader" class="headerlink" title="配置样式相关 loader"></a>配置样式相关 loader</h4><ul>
<li>由于 <code>React</code> 无法直接使用类似 <code>Vue</code> 中 <code>scope</code> 这种局部作用变量，所以我们可以使用 <code>webpack</code> 提供的 <code>CSS Module</code>。<br>2、由于等会儿会使用 <code>antd</code>，所以引入 <code>antd</code> 时需要开启 <code>less</code> 的 <code>javascript</code> 选项，所以要将 <code>less-loader</code> 中的属性 <code>javascriptEnabled</code> 设置为 <code>true</code>。</li>
</ul>
<p>在 webpack.config.dev.js 中配置：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="keyword">const</span> autoprefixer = <span class="built_in">require</span>(<span class="string">'autoprefixer'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    ...,</span><br><span class="line">    plugins: [...],</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [</span><br><span class="line">            ...,</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.(css|less)$/</span>,</span><br><span class="line">                exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">                use: [&#123;</span><br><span class="line">                        loader: <span class="string">'style-loader'</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'css-loader'</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            sourceMap: <span class="literal">true</span>,</span><br><span class="line">                            modules: <span class="literal">true</span>,</span><br><span class="line">                            localIdentName: <span class="string">'[local].[hash:8]'</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'postcss-loader'</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            plugins: <span class="function"><span class="params">()</span> =&gt;</span> [autoprefixer()]</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'less-loader'</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            javascriptEnabled: <span class="literal">true</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.(css|less)$/</span>,</span><br><span class="line">                include: <span class="regexp">/node_modules/</span>,</span><br><span class="line">                use: [&#123;</span><br><span class="line">                        loader: <span class="string">'style-loader'</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'css-loader'</span>,</span><br><span class="line">                        options: &#123;&#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'postcss-loader'</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            plugins: <span class="function"><span class="params">()</span> =&gt;</span> [autoprefixer()]</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'less-loader'</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            javascriptEnabled: <span class="literal">true</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="添加其他模块解析-loader-配置"><a href="#添加其他模块解析-loader-配置" class="headerlink" title="添加其他模块解析 loader 配置"></a>添加其他模块解析 loader 配置</h3><p>安装相关插件：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install file-loader csv-loader xml-loader html-loader markdown-loader --save-dev</span><br></pre></td></tr></table></figure></p>
<p>在 webpack.config.dev.js 中配置：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    ...,</span><br><span class="line">    plugins: [...],</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [</span><br><span class="line">            ...,</span><br><span class="line">            <span class="comment">// 解析图片资源</span></span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.(png|svg|jpg|gif)$/</span>,</span><br><span class="line">                use: [</span><br><span class="line">                    <span class="string">'file-loader'</span></span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">// 解析 字体</span></span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.(woff|woff2|eot|ttf|otf)$/</span>,</span><br><span class="line">                use: [</span><br><span class="line">                    <span class="string">'file-loader'</span></span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">// 解析数据资源</span></span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.(csv|tsv)$/</span>,</span><br><span class="line">                use: [</span><br><span class="line">                    <span class="string">'csv-loader'</span></span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">// 解析数据资源</span></span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.xml$/</span>,</span><br><span class="line">                use: [</span><br><span class="line">                    <span class="string">'xml-loader'</span></span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">// 解析 MakeDown 文件</span></span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.md$/</span>,</span><br><span class="line">                use: [</span><br><span class="line">                    <span class="string">'html-loader'</span>,</span><br><span class="line">                    <span class="string">'markdown-loader'</span></span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="额外的-webpack-配置优化"><a href="#额外的-webpack-配置优化" class="headerlink" title="额外的 webpack 配置优化"></a>额外的 webpack 配置优化</h3><h4 id="添加-resolve-allias-属性，设置别名"><a href="#添加-resolve-allias-属性，设置别名" class="headerlink" title="添加 resolve allias 属性，设置别名"></a>添加 resolve allias 属性，设置别名</h4><p>在项目开发过程中，随着项目越来越大， 文件层级越来越深，引入文件的时候可能会需要一层一层的找路径，就会比较繁琐，我们可以使用 <code>resolve</code>  中的 <code>alias</code> 属性为一些常用的文件夹设置别名</p>
<p>webpack.config.dev.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">··· </span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    ...,</span><br><span class="line">    plugins: [...],</span><br><span class="line">    <span class="built_in">module</span>: &#123;...&#125;,</span><br><span class="line">+    resolve: &#123;</span><br><span class="line">+        alias: &#123;</span><br><span class="line">+            src: appSrc,</span><br><span class="line">+            utils: path.resolve(__dirname, <span class="string">'../src/utils'</span>),</span><br><span class="line">+            pages: path.resolve(__dirname, <span class="string">'../src/pages'</span>),</span><br><span class="line">+            components: path.resolve(__dirname, <span class="string">'../src/components'</span>)</span><br><span class="line">+        &#125;</span><br><span class="line">+    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="添加-resolve-modules-属性，指明第三方模块存放位置"><a href="#添加-resolve-modules-属性，指明第三方模块存放位置" class="headerlink" title="添加 resolve.modules 属性，指明第三方模块存放位置"></a>添加 resolve.modules 属性，指明第三方模块存放位置</h4><p>我们知道，一般进行模块搜索时，会从当前目录下的 <code>node_modules</code> 一直搜索到磁盘根目录下的 <code>node_modules</code>。所以为了减少搜索步骤，我们可以设置 <code>resolve.modules</code> 属性强制只从项目的 <code>node_modules</code> 中查找模块。</p>
<p>webpack.config.dev.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">··· </span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    ...,</span><br><span class="line">    plugins: [...],</span><br><span class="line">    <span class="built_in">module</span>: &#123;...&#125;,</span><br><span class="line">    resolve: &#123;</span><br><span class="line">        ...,</span><br><span class="line">+        modules: [path.resolve(__dirname, <span class="string">'../node_modules'</span>)],</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="安装-React、MObx-以及-React-Router-相关插件"><a href="#安装-React、MObx-以及-React-Router-相关插件" class="headerlink" title="安装 React、MObx 以及 React Router 相关插件"></a>安装 React、MObx 以及 React Router 相关插件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install react react-dom prop-types mobx mobx-react react-router-dom --save</span><br></pre></td></tr></table></figure>
<h3 id="引入-antd"><a href="#引入-antd" class="headerlink" title="引入 antd"></a>引入 antd</h3><p>按照 <code>antd</code> 官网的说明，直接在 <code>.babelrc</code> 文件中添加配置，之后即可在项目中正常使用了。</p>
<p>安装 antd 相关插件：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install antd moment --save</span><br></pre></td></tr></table></figure></p>
<p>安装 babel-plugin-import 对组件进行按需加载：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install babel-plugin-import --save-dev</span><br></pre></td></tr></table></figure></p>
<p>在 .babelrc 文件中添加 antd 配置：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"presets"</span>: [</span><br><span class="line">        <span class="string">"env"</span>,</span><br><span class="line">        <span class="string">"stage-0"</span>,</span><br><span class="line">        <span class="string">"react"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"plugins"</span>: [</span><br><span class="line">        <span class="string">"transform-decorators-legacy"</span>,</span><br><span class="line">+        [</span><br><span class="line">+            <span class="string">"import"</span>,</span><br><span class="line">+            &#123;</span><br><span class="line">+                "libraryName": "antd",</span><br><span class="line">+                "style": true</span><br><span class="line">+            &#125;</span><br><span class="line">+        ],</span><br><span class="line">        "transform-runtime",</span><br><span class="line">        <span class="string">"transform-class-properties"</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="四、进行-React-开发"><a href="#四、进行-React-开发" class="headerlink" title="四、进行 React 开发"></a>四、进行 React 开发</h2><p>基本上需要的插件目前都已经引入了，是时候进行开发了。</p>
<h3 id="修改根目录下的-index-js-文件"><a href="#修改根目录下的-index-js-文件" class="headerlink" title="修改根目录下的 index.js 文件"></a>修改根目录下的 index.js 文件</h3><p>index.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDom <span class="keyword">from</span> <span class="string">'react-dom'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Provider &#125; <span class="keyword">from</span> <span class="string">'mobx-react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; LocaleProvider &#125; <span class="keyword">from</span> <span class="string">'antd'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; HashRouter &#125; <span class="keyword">from</span> <span class="string">'react-router-dom'</span>;</span><br><span class="line"><span class="keyword">import</span> zh_CN <span class="keyword">from</span> <span class="string">'antd/lib/locale-provider/zh_CN'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'moment/locale/zh-cn'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> GlobalModel <span class="keyword">from</span> <span class="string">'./GlobalModel'</span>;</span><br><span class="line"><span class="comment">// import App from './App';</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> globalModel = <span class="keyword">new</span> GlobalModel();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> App = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>开发环境配置完成<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDom.render(</span><br><span class="line">    &lt;Provider globalModel=&#123; globalModel &#125;&gt;</span><br><span class="line">        &lt;LocaleProvider locale=&#123;zh_CN&#125;&gt;</span><br><span class="line">            &lt;HashRouter&gt;</span><br><span class="line">                &lt;App /&gt;</span><br><span class="line">            &lt;<span class="regexp">/HashRouter&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>LocaleProvider&gt;</span><br><span class="line">    &lt;<span class="regexp">/Provider&gt;,</span></span><br><span class="line"><span class="regexp">    document.querySelector('#root')</span></span><br><span class="line"><span class="regexp">);</span></span><br></pre></td></tr></table></figure></p>
<p>运行 <code>npm run start</code> 命令，在浏览器打开 <code>http://localhost:8000/</code>，就能够看到 <em>开发环境配置完成</em> 正常显示。</p>
<p>此时说明我们各种插件、库都已经引入完成，可以正常使用了。</p>
<h3 id="使用-React-Route-进行页面间路由跳转"><a href="#使用-React-Route-进行页面间路由跳转" class="headerlink" title="使用 React Route 进行页面间路由跳转"></a>使用 React Route 进行页面间路由跳转</h3><h4 id="在-src-目录下新建-App-js-文件："><a href="#在-src-目录下新建-App-js-文件：" class="headerlink" title="在 src 目录下新建 App.js 文件："></a>在 src 目录下新建 App.js 文件：</h4><p>App.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Switch, Route &#125; <span class="keyword">from</span> <span class="string">'react-router-dom'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">'pages/home'</span>;</span><br><span class="line"><span class="keyword">import</span> Settings <span class="keyword">from</span> <span class="string">'pages/settings'</span>;</span><br><span class="line"><span class="keyword">import</span> Display <span class="keyword">from</span> <span class="string">'pages/display'</span>;</span><br><span class="line"><span class="keyword">import</span> NotFound <span class="keyword">from</span> <span class="string">'pages/exception'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">'./App.less'</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (props) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;div className=&#123; styles.app &#125;&gt;</span><br><span class="line">            &lt;Switch&gt;</span><br><span class="line">                &lt;Route path=<span class="string">'/settings'</span> component=&#123; Settings &#125; /&gt;</span><br><span class="line">                &lt;Route path=<span class="string">'/display'</span> component=&#123; Display &#125; /&gt;</span><br><span class="line">                &lt;Route exact path=<span class="string">'/'</span> component=&#123; Home &#125; /&gt;</span><br><span class="line">                &lt;Route component=&#123; NotFound &#125; /&gt;</span><br><span class="line">            &lt;<span class="regexp">/Switch&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>div&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>在 <code>src</code> 目录下创建 <code>App.less</code> 文件，编写 <code>App</code> 组件样式</p>
<p>App.less<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.app</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">60px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="在-pages-目录下编写-Home、Settings、Display、NotFound-组件"><a href="#在-pages-目录下编写-Home、Settings、Display、NotFound-组件" class="headerlink" title="在 pages 目录下编写 Home、Settings、Display、NotFound 组件"></a>在 pages 目录下编写 Home、Settings、Display、NotFound 组件</h4><ul>
<li><code>Home</code> 组件是根路由组件，用来跳转到 <code>Setting</code> 界面和 <code>Display</code> 界面</li>
<li><code>Settings</code> 组件演示了如何获取和修改 <code>mobx</code> 的全局 <code>Model</code></li>
<li><code>Display</code> 组件演示了如何使用 mobx 进行同步和异步的数据处理</li>
<li><code>NotFound</code> 组件在匹配不到正确路由时展示</li>
</ul>
<blockquote>
<p>Home、Settings、Display 相关的代码我就不贴了，占的篇幅较长，大家需要的话可以去我的 Github 上看一下或者下载下来也可以。比较方便。地址：<a href="https://github.com/beichensky/react-mobx-starter" target="_blank" rel="noopener">Github</a></p>
</blockquote>
<h4 id="再修改一下-index-js-文件"><a href="#再修改一下-index-js-文件" class="headerlink" title="再修改一下 index.js 文件"></a>再修改一下 index.js 文件</h4><p>index.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDom <span class="keyword">from</span> <span class="string">'react-dom'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Provider &#125; <span class="keyword">from</span> <span class="string">'mobx-react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; LocaleProvider &#125; <span class="keyword">from</span> <span class="string">'antd'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; HashRouter &#125; <span class="keyword">from</span> <span class="string">'react-router-dom'</span>;</span><br><span class="line"><span class="keyword">import</span> zh_CN <span class="keyword">from</span> <span class="string">'antd/lib/locale-provider/zh_CN'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'moment/locale/zh-cn'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> GlobalModel <span class="keyword">from</span> <span class="string">'./GlobalModel'</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> globalModel = <span class="keyword">new</span> GlobalModel();</span><br><span class="line"></span><br><span class="line">ReactDom.render(</span><br><span class="line">    &lt;Provider globalModel=&#123; globalModel &#125;&gt;</span><br><span class="line">        &lt;LocaleProvider locale=&#123;zh_CN&#125;&gt;</span><br><span class="line">            &lt;HashRouter&gt;</span><br><span class="line">                &lt;App /&gt;</span><br><span class="line">            &lt;<span class="regexp">/HashRouter&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>LocaleProvider&gt;</span><br><span class="line">    &lt;<span class="regexp">/Provider&gt;,</span></span><br><span class="line"><span class="regexp">    document.querySelector('#root')</span></span><br><span class="line"><span class="regexp">);</span></span><br></pre></td></tr></table></figure></p>
<p>可以看到这里有一个 <code>GlobalModel</code> 存放全局通用数据的 Model，里面的逻辑比较简单，我们稍微看一下。</p>
<p>GlobalModel.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; observable, action &#125; <span class="keyword">from</span> <span class="string">'mobx'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">GlobalModel</span> </span>&#123;</span><br><span class="line">    @observable username = <span class="string">'小明'</span>;</span><br><span class="line"></span><br><span class="line">    @action</span><br><span class="line">    changeUserName = <span class="function">(<span class="params">name</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.username = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="添加-fetch-工具类进行网络请求"><a href="#添加-fetch-工具类进行网络请求" class="headerlink" title="添加 fetch 工具类进行网络请求"></a>添加 fetch 工具类进行网络请求</h3><p>由于我们在 Display 组件中需要进行网络请求的异步操作，所以我们这里引入 fetch 进行网络请求。</p>
<h4 id="安装-fetch-相关插件："><a href="#安装-fetch-相关插件：" class="headerlink" title="安装 fetch 相关插件："></a>安装 fetch 相关插件：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install whatwg-fetch qs --save</span><br></pre></td></tr></table></figure>
<h4 id="编写网络请求工具类"><a href="#编写网络请求工具类" class="headerlink" title="编写网络请求工具类"></a>编写网络请求工具类</h4><p>在 <code>utils</code> 目录下创建 <code>request.js</code> 文件。</p>
<p>utils/request.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'whatwg-fetch'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; stringify &#125; <span class="keyword">from</span> <span class="string">'qs'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 使用 Get 方式进行网络请求</span></span><br><span class="line"><span class="comment"> * @param &#123;*&#125; url </span></span><br><span class="line"><span class="comment"> * @param &#123;*&#125; data </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> get = <span class="function">(<span class="params">url, data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> newUrl = url + <span class="string">'?'</span> + stringify(data) + (stringify(data) === <span class="string">''</span> ? <span class="string">''</span> : <span class="string">'&amp;'</span>) +<span class="string">'_random='</span> + <span class="built_in">Date</span>.now();</span><br><span class="line">    <span class="keyword">return</span> fetch(newUrl, &#123;</span><br><span class="line">            cache: <span class="string">'no-cache'</span>,</span><br><span class="line">            headers: &#123;</span><br><span class="line">                <span class="string">'Accept'</span>: <span class="string">'application/json'</span>,</span><br><span class="line">                <span class="string">'Content-Type'</span>: <span class="string">'application/json; charset=utf-8'</span></span><br><span class="line">            &#125;,</span><br><span class="line">            method: <span class="string">'GET'</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">        .then(<span class="function"><span class="params">response</span> =&gt;</span> response.json());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 进行 Post 方式进行网络请求</span></span><br><span class="line"><span class="comment"> * @param &#123;*&#125; url </span></span><br><span class="line"><span class="comment"> * @param &#123;*&#125; data </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> post = <span class="function">(<span class="params">url, data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> fetch(url, &#123;</span><br><span class="line">        body: <span class="built_in">JSON</span>.stringify(data), </span><br><span class="line">        cache: <span class="string">'no-cache'</span>,</span><br><span class="line">        headers: &#123;</span><br><span class="line">            <span class="string">'Accept'</span>: <span class="string">'application/json'</span>,</span><br><span class="line">            <span class="string">'Content-Type'</span>: <span class="string">'application/json; charset=utf-8'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        method: <span class="string">'POST'</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(<span class="function"><span class="params">response</span> =&gt;</span> response.json()) <span class="comment">// parses response to JSON</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="至此，简单的-React-框架搭建完成了"><a href="#至此，简单的-React-框架搭建完成了" class="headerlink" title="至此，简单的 React 框架搭建完成了"></a>至此，简单的 React 框架搭建完成了</h3><p>执行 <code>npm run start</code>，编译成功后，可以看到界面长这样。</p>
<p>Home 界面：<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/react-mobx-starter/Home.png" alt="Home 界面" title="">
                </div>
                <div class="image-caption">Home 界面</div>
            </figure></p>
<p>Settings 界面：<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/react-mobx-starter/Settings.png" alt="Settings 界面" title="">
                </div>
                <div class="image-caption">Settings 界面</div>
            </figure></p>
<p>Display 界面：<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/react-mobx-starter/Display.png" alt="Display 界面" title="">
                </div>
                <div class="image-caption">Display 界面</div>
            </figure></p>
<p>NotFound 界面：<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/react-mobx-starter/NotFound.png" alt="NotFound 界面" title="">
                </div>
                <div class="image-caption">NotFound 界面</div>
            </figure></p>
<hr>
<h2 id="五、进行-React-项目打包配置"><a href="#五、进行-React-项目打包配置" class="headerlink" title="五、进行 React 项目打包配置"></a>五、进行 React 项目打包配置</h2><h3 id="先在-package-json-文件中新增一个执行脚本："><a href="#先在-package-json-文件中新增一个执行脚本：" class="headerlink" title="先在 package.json 文件中新增一个执行脚本："></a>先在 package.json 文件中新增一个执行脚本：</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    ...,</span><br><span class="line">    "scripts": &#123;</span><br><span class="line">        "start": "webpack-dev-server --config webpack/webpack.config.dev.js",</span><br><span class="line">        "build": "webpack --config webpack/webpack.config.prod.js"</span><br><span class="line">    &#125;,</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="配置-webpack-config-prod-js-文件"><a href="#配置-webpack-config-prod-js-文件" class="headerlink" title="配置 webpack.config.prod.js 文件"></a>配置 webpack.config.prod.js 文件</h3><p>其中大部分的 <code>module</code> 和 <code>plugin</code> 还有 <code>resolve</code> 都与开发环境的一致。所以我们就以 <code>webpack.config.dev.js</code> 文件中的配置为基础进行说明。</p>
<ul>
<li>将 mode 属性值修改为：’production’</li>
<li>将 devtool 属性值修改为：’hidden-source-map’</li>
<li>删除 devServer 属性所有的配置。</li>
<li>删除使用的热加载插件：·webpack.HotModuleReplacementPlugin`,</li>
</ul>
<h4 id="添加-optimization-属性进行代码压缩"><a href="#添加-optimization-属性进行代码压缩" class="headerlink" title="添加 optimization 属性进行代码压缩"></a>添加 optimization 属性进行代码压缩</h4><p>安装相关插件：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install uglifyjs-webpack-plugin optimize-css-assets-webpack-plugin --save-dev</span><br></pre></td></tr></table></figure></p>
<p>添加代码压缩配置：</p>
<p>webpack.config.prod.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">...;</span><br><span class="line"><span class="keyword">const</span> UglifyJsPlugin = <span class="built_in">require</span>(<span class="string">'uglifyjs-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> OptimizeCSSAssetsPlugin = <span class="built_in">require</span>(<span class="string">"optimize-css-assets-webpack-plugin"</span>);</span><br><span class="line">...;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    mode: <span class="string">'production'</span>,</span><br><span class="line">    devtool: <span class="string">'hidden-source-map'</span>,</span><br><span class="line">    entry: ...,</span><br><span class="line">    output: &#123;...&#125;,</span><br><span class="line">    plugins: [...],</span><br><span class="line">    <span class="built_in">module</span>: &#123;...&#125;,</span><br><span class="line">    optimization: &#123;</span><br><span class="line">        <span class="comment">// 打包压缩js/css文件</span></span><br><span class="line">        minimizer: [</span><br><span class="line">            <span class="keyword">new</span> UglifyJsPlugin(&#123;</span><br><span class="line">                uglifyOptions: &#123;</span><br><span class="line">                    compress: &#123;</span><br><span class="line">                        <span class="comment">// 在UglifyJs删除没有用到的代码时不输出警告</span></span><br><span class="line">                        warnings: <span class="literal">false</span>,</span><br><span class="line">                        <span class="comment">// 删除所有的 `console` 语句，可以兼容ie浏览器</span></span><br><span class="line">                        drop_console: <span class="literal">true</span>,</span><br><span class="line">                        <span class="comment">// 内嵌定义了但是只用到一次的变量</span></span><br><span class="line">                        collapse_vars: <span class="literal">true</span>,</span><br><span class="line">                        <span class="comment">// 提取出出现多次但是没有定义成变量去引用的静态值</span></span><br><span class="line">                        reduce_vars: <span class="literal">true</span>,</span><br><span class="line">                    &#125;,</span><br><span class="line">                    output: &#123;</span><br><span class="line">                        <span class="comment">// 最紧凑的输出</span></span><br><span class="line">                        beautify: <span class="literal">false</span>,</span><br><span class="line">                        <span class="comment">// 删除所有的注释</span></span><br><span class="line">                        comments: <span class="literal">false</span>,</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;),</span><br><span class="line">            <span class="keyword">new</span> OptimizeCSSAssetsPlugin(&#123;&#125;)</span><br><span class="line">        ],</span><br><span class="line">        splitChunks: &#123;</span><br><span class="line">            cacheGroups: &#123;</span><br><span class="line">                styles: &#123;</span><br><span class="line">                    name: <span class="string">'styles'</span>,</span><br><span class="line">                    test: <span class="regexp">/\.(css|less)/</span>,</span><br><span class="line">                    chunks: <span class="string">'all'</span>,</span><br><span class="line">                    enforce: <span class="literal">true</span>,</span><br><span class="line">                    reuseExistingChunk: <span class="literal">true</span> <span class="comment">// 表示是否使用已有的 chunk，如果为 true 则表示如果当前的 chunk 包含的模块已经被抽取出去了，那么将不会重新生成新的。</span></span><br><span class="line">                &#125;,</span><br><span class="line">                commons: &#123;</span><br><span class="line">                    name: <span class="string">'commons'</span>,</span><br><span class="line">                    chunks: <span class="string">'initial'</span>,</span><br><span class="line">                    minChunks: <span class="number">2</span>,</span><br><span class="line">                    reuseExistingChunk: <span class="literal">true</span></span><br><span class="line">                &#125;,</span><br><span class="line">                vendors: &#123;</span><br><span class="line">                    name: <span class="string">'vendors'</span>,</span><br><span class="line">                    test: <span class="regexp">/[\\/]node_modules[\\/]/</span>,</span><br><span class="line">                    priority: <span class="number">-10</span>,</span><br><span class="line">                    reuseExistingChunk: <span class="literal">true</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        runtimeChunk: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    resolve: &#123;...&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="使用-mini-css-extract-plugin-插件提取-CSS-代码"><a href="#使用-mini-css-extract-plugin-插件提取-CSS-代码" class="headerlink" title="使用 mini-css-extract-plugin 插件提取 CSS 代码"></a>使用 mini-css-extract-plugin 插件提取 CSS 代码</h4><p>安装相关插件：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install mini-css-extract-plugin --save-dev</span><br></pre></td></tr></table></figure></p>
<p>配置 <code>mini-css-extract-plugin</code> 插件：</p>
<ul>
<li>在 <code>plugins</code> 属性中引入</li>
<li>将 <code>module</code> 的 <code>rules</code> 中使用的 <code>style-loader</code> 替换为 <code>MiniCssExtractPlugin.loader</code></li>
</ul>
<p>webpack.config.prod.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="keyword">const</span> MiniCssExtractPlugin = <span class="built_in">require</span>(<span class="string">'mini-css-extract-plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    ...,</span><br><span class="line">    plugins: [</span><br><span class="line">        ...,</span><br><span class="line">        <span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">            filename: <span class="string">'public/styles/[name].[contenthash:8].css'</span>,</span><br><span class="line">            chunkFilename: <span class="string">'public/styles/[name].[contenthash:8].chunk.css'</span></span><br><span class="line">        &#125;)</span><br><span class="line">    ],</span><br><span class="line">    modules: &#123;</span><br><span class="line">        rules: [</span><br><span class="line">            ...,</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.(css|less)$/</span>,</span><br><span class="line">                exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">                use: [</span><br><span class="line">                    &#123;</span><br><span class="line">-                        loader: <span class="string">'style-loader'</span></span><br><span class="line">+                        loader: MiniCssExtractPlugin.loader</span><br><span class="line">                    &#125;,</span><br><span class="line">                    ...</span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.(css|less)$/</span>,</span><br><span class="line">                exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">                use: [</span><br><span class="line">                    &#123;</span><br><span class="line">-                        loader: <span class="string">'style-loader'</span></span><br><span class="line">+                        loader: MiniCssExtractPlugin.loader</span><br><span class="line">                    &#125;,</span><br><span class="line">                    ...</span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            ...</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="使用-DefinePlugin-插件定义当前为生产环境"><a href="#使用-DefinePlugin-插件定义当前为生产环境" class="headerlink" title="使用 DefinePlugin 插件定义当前为生产环境"></a>使用 DefinePlugin 插件定义当前为生产环境</h4><p>webpack.config.prod.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    ...,</span><br><span class="line"></span><br><span class="line">    plugins: [</span><br><span class="line">        ...,</span><br><span class="line">        <span class="keyword">new</span> webpack.DefinePlugin(&#123;</span><br><span class="line">            <span class="comment">// 定义 NODE_ENV 环境变量为 production</span></span><br><span class="line">            <span class="string">'process.env'</span>: &#123;</span><br><span class="line">                NODE_ENV: <span class="built_in">JSON</span>.stringify(<span class="string">'production'</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    ],</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="使用-clean-webpack-plugin-清理-dist-目录"><a href="#使用-clean-webpack-plugin-清理-dist-目录" class="headerlink" title="使用 clean-webpack-plugin 清理 dist 目录"></a>使用 clean-webpack-plugin 清理 dist 目录</h4><p>打包的过程中，由于部分文件名使用的是 hash 值，会导致每次文件不同，因而在 dist 中生成一些多余的文件。所以我们可以在每次打包之前清理一下 dist 目录。</p>
<p>安装插件：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install clean-webpack-plugin --save-dev</span><br></pre></td></tr></table></figure></p>
<p>使用插件：</p>
<p>webpack.config.prod.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">...,</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    ...,</span><br><span class="line">    plugins: [</span><br><span class="line">        ...,</span><br><span class="line">        <span class="keyword">new</span> CleanWebpackPlugin()</span><br><span class="line">    ],</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="添加其他优化配置"><a href="#添加其他优化配置" class="headerlink" title="添加其他优化配置"></a>添加其他优化配置</h4><ul>
<li>添加 stats 配置过滤打包时出现的一些统计信息。</li>
<li>添加 performance 配置关闭性能提示</li>
</ul>
<p>webpack.config.prod.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    ...,</span><br><span class="line">    stats: &#123;</span><br><span class="line">        modules: <span class="literal">false</span>,</span><br><span class="line">        children: <span class="literal">false</span>,</span><br><span class="line">        chunks: <span class="literal">false</span>,</span><br><span class="line">        chunkModules: <span class="literal">false</span></span><br><span class="line">    &#125;,</span><br><span class="line">    performance: &#123;</span><br><span class="line">        hints: <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="进行项目的打包发布"><a href="#进行项目的打包发布" class="headerlink" title="进行项目的打包发布"></a>进行项目的打包发布</h3><h4 id="打包项目"><a href="#打包项目" class="headerlink" title="打包项目"></a>打包项目</h4><p>运行 <code>npm run build</code> 指令，控制台打包完成之后，根目录下多出了 <code>dist</code> 文件夹。</p>
<h4 id="使用-Nginx-发布项目"><a href="#使用-Nginx-发布项目" class="headerlink" title="使用 Nginx 发布项目"></a>使用 Nginx 发布项目</h4><p>我这里是用的是 <code>Nginx</code> 作为服务器，发布在本地。</p>
<p><code>Nginx</code> 下载地址：<a href="http://nginx.org/en/download.html" target="_blank" rel="noopener">http://nginx.org/en/download.html</a>。</p>
<p>下载完成之后，解压完成。打开 <code>Nginx</code> 目录，可以找到一个 <code>conf</code> 文件夹，找到其中的 <code>nginx.conf</code> 文件，修改器中的配置：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/react-mobx-starter/nginxConf" alt="Nginx 配置" title="">
                </div>
                <div class="image-caption">Nginx 配置</div>
            </figure>
<blockquote>
<p>将图中标注的 <code>html</code> 更换为 <code>dist</code>。</p>
</blockquote>
<p>然后我们就可以放心的将打包生成的 <code>dist</code> 文件夹直接放到 <code>Nginx</code> 的安装目录下了。（此时 <code>dist</code> 目录与刚才的 <code>conf</code> 目录应该是同级的）。</p>
<p>启动 <code>Nginx</code> 服务：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">start nginx</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>打开浏览器，输入 <code>http://127.0.0.1</code> 或者 <code>http://localhost</code> 即可看到我们的项目已经正常的跑起来了。</p>
</blockquote>
<p>Nginx 其他命令：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 停止 Nginx 服务</span></span><br><span class="line">nginx -s stop</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重启 Nginx 服务</span></span><br><span class="line">nginx -s reload</span><br><span class="line"></span><br><span class="line"><span class="comment"># 退出 nginx</span></span><br><span class="line">nginx -s quit</span><br></pre></td></tr></table></figure></p>
<p>更多 Ngnix 相关请参考：<a href="http://nginx.org/en/" target="_blank" rel="noopener">Nginx官方文档</a></p>
<blockquote>
<p><strong>注意：需要在 Nginx 安装目下执行 nginx 相关命令！</strong></p>
</blockquote>
<hr>
<h2 id="六、使用-webpack-merge-引入webpack-公共配置"><a href="#六、使用-webpack-merge-引入webpack-公共配置" class="headerlink" title="六、使用 webpack-merge 引入webpack 公共配置"></a>六、使用 webpack-merge 引入webpack 公共配置</h2><p>观察 <code>webpack.config.dev.js</code> 和 <code>webpack.config.prod.js</code> 文件，可以发现有大量的代码和配置出现了重复。所以我们可以编写一个 <code>webpack.common.js</code> 文件，将共有的配置放入其中，然后使用 <code>webpack-merge</code> 插件分别引入到 <code>webpack.config.dev.js</code> 和 <code>webpack.config.prod.js</code> 文件中使用。</p>
<p>插件安装：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install webpack-merge --save-dev</span><br></pre></td></tr></table></figure></p>
<p>使用：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">+ <span class="keyword">const</span> merge = <span class="built_in">require</span>(<span class="string">'webpack-merge'</span>);</span><br><span class="line">+ <span class="keyword">const</span> common = <span class="built_in">require</span>(<span class="string">'./webpack.common.js'</span>);</span><br><span class="line"></span><br><span class="line">+ <span class="built_in">module</span>.exports = merge(common, &#123;</span><br><span class="line">+   mode: <span class="string">'production'</span>,</span><br><span class="line">+   ...</span><br><span class="line">+ &#125;);</span><br></pre></td></tr></table></figure></p>
<p>这里就展示了一下用法，由于篇幅太长，三个文件中具体的配置代码我就不贴了，<br>大家可以到 <a href="https://github.com/beichensky/react-mobx-starter" target="_blank" rel="noopener">我的 GitHub</a> 上查看一下使用 <code>webpack-merge</code> 后的配置文件。</p>
<hr>
<h2 id="七、本文源码地址"><a href="#七、本文源码地址" class="headerlink" title="七、本文源码地址"></a>七、本文源码地址</h2><p><strong><a href="https://github.com/beichensky/react-mobx-starter" target="_blank" rel="noopener">react-mobx-starter</a></strong></p>
<p><strong>欢迎Star，谢谢各位！</strong></p>
<p><strong>文章及代码中如有问题，欢迎指正，谢谢！</strong></p>
<hr>
<h2 id="八、参考文档："><a href="#八、参考文档：" class="headerlink" title="八、参考文档："></a>八、参考文档：</h2><p><a href="https://juejin.im/post/58ff0de18d6d810058a69a26" target="_blank" rel="noopener">如何在react项目中配置ESlint</a></p>
<p><a href="https://webpack.js.org/" target="_blank" rel="noopener">webpack 官网</a></p>
<p><a href="https://juejin.im/post/5c51520cf265da61180215e5" target="_blank" rel="noopener">从零开始搭建一个 Webpack 开发环境配置（附 Demo）</a></p>
<p><a href="https://juejin.im/post/5c51520cf265da61180215e5" target="_blank" rel="noopener">使用 Webpack 进行生产环境配置（附 Demo）</a></p>
<!-- 
### 使用 elint 进行代码校验

#### 安装 eslint 相关插件
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install eslint babel-eslint eslint-config-airbnb eslint-loader eslint-plugin-react eslint-plugin-import eslint-plugin-jsx-a11y --save-dev</span><br></pre></td></tr></table></figure>
<h4 id="配置-elint-loader"><a href="#配置-elint-loader" class="headerlink" title="配置 elint-loader"></a>配置 elint-loader</h4><p>在 webpack.config.dev.js 中添加配置：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    ...</span><br><span class="line">    plugins: [ ... ],</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [</span><br><span class="line">            <span class="comment">// 为 js 文件添加 eslint</span></span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.(js|jsx)$/</span>,</span><br><span class="line">                enforce: <span class="string">'pre'</span>,</span><br><span class="line">                use: [&#123;</span><br><span class="line">                    loader: <span class="built_in">require</span>.resolve(<span class="string">'eslint-loader'</span>),</span><br><span class="line">                    options: &#123;</span><br><span class="line">                        eslintPath: <span class="built_in">require</span>.resolve(<span class="string">'eslint'</span>),</span><br><span class="line">                        emitWarning: <span class="literal">false</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;],</span><br><span class="line">                exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">                include: [ appSrc ]</span><br><span class="line">            &#125;,</span><br><span class="line">            ...</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="新建-eslintrc-文件添加-eslint-配置"><a href="#新建-eslintrc-文件添加-eslint-配置" class="headerlink" title="新建 .eslintrc 文件添加 eslint 配置"></a>新建 .eslintrc 文件添加 eslint 配置</h4><p>.elintrc<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"parser"</span>: <span class="string">"babel-eslint"</span>,</span><br><span class="line">    <span class="attr">"extends"</span>: <span class="string">"airbnb"</span>,</span><br><span class="line">    <span class="attr">"rules"</span>: &#123;</span><br><span class="line">        <span class="attr">"global-require"</span>: [<span class="number">1</span>],</span><br><span class="line">        <span class="attr">"jsx-a11y/no-static-element-interactions"</span>: [<span class="number">0</span>],</span><br><span class="line">        <span class="attr">"no-else-return"</span>: [<span class="number">0</span>],</span><br><span class="line">        <span class="attr">"lines-between-class-members"</span>: <span class="string">"off"</span>,</span><br><span class="line">        <span class="attr">"no-restricted-syntax"</span>: [<span class="number">0</span>],</span><br><span class="line">        <span class="attr">"react/jsx-no-bind"</span>: [<span class="number">0</span>],</span><br><span class="line">        <span class="attr">"react/prop-types"</span>: [<span class="number">2</span>],</span><br><span class="line">        <span class="attr">"react/sort-comp"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">"import/no-dynamic-require"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">"no-debugger"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">"indent"</span>: [<span class="number">0</span>, <span class="number">4</span>],</span><br><span class="line">        <span class="attr">"linebreak-style"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">"comma-dangle"</span>: [<span class="number">2</span>, <span class="string">"never"</span>],</span><br><span class="line">        <span class="attr">"react/jsx-equals-spacing"</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"parserOptions"</span>: &#123;</span><br><span class="line">        <span class="attr">"ecmaFeatures"</span>: &#123;</span><br><span class="line">            <span class="attr">"experimentalObjectRestSpread"</span>: <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"env"</span>: &#123;</span><br><span class="line">        <span class="attr">"browser"</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">"node"</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>在 rules 属性中可以自行进行规则的新增和修改。更多 ESLint 规则请查看：<a href="https://cn.eslint.org/docs/rules/">ESLint Rules</a>。<br>–&gt;</p>
-->
        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        

        
        原始链接：<a href="/20190411/react-mobx-starter/" target="_blank" rel="external">https://beichensky.github.io/20190411/react-mobx-starter/</a>
        
    </div>
    
    <footer>
        <a href="https://beichensky.github.io">
            <img src="/img/avatar.jpg" alt="卢凡凡">
            卢凡凡
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/React/">React</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Webpack/">Webpack</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/前端开发/">前端开发</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://beichensky.github.io/20190411/react-mobx-starter/&title=《从零开始搭建一个 React + Mobx + React Router 脚手架》 — 前端小栈&pic=https://beichensky.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://beichensky.github.io/20190411/react-mobx-starter/&title=《从零开始搭建一个 React + Mobx + React Router 脚手架》 — 前端小栈&source=本文详细介绍了如何从零开始搭建一个 React 开发的脚手架，包含如何添加 Redux 以及 React Router 的环境。" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://beichensky.github.io/20190411/react-mobx-starter/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《从零开始搭建一个 React + Mobx + React Router 脚手架》 — 前端小栈&url=https://beichensky.github.io/20190411/react-mobx-starter/&via=https://beichensky.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://beichensky.github.io/20190411/react-mobx-starter/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/20190528/JS-小数运算出现误差的解决办法/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">JS 小数运算出现误差的两种解决办法</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/20190408/react-hooks/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">React Hooks 使用详解</h4>
      </a>
    </div>
  
</nav>



    











    <!-- Valine Comments -->
    <div class="comments vcomment" id="comments"></div>
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script>
    <!-- Valine Comments script -->
    <script>
        var GUEST_INFO = ['nick','mail','link'];
        var guest_info = 'nick,mail,link'.split(',').filter(function(item){
          return GUEST_INFO.indexOf(item) > -1
        });
        new Valine({
            el: '#comments',
            notify: 'false' == 'true',
            verify: 'false' == 'true',
            appId: "dAOovJq82ddaEvVzyiNHIxtj-gzGzoHsz",
            appKey: "ekVtCf1N8VWSPfjArfQngw5Y",
            avatar: "mm",
            placeholder: "Just go go",
            guest_info: guest_info.length == 0 ? GUEST_INFO : guest_info,
            pageSize: "10"
        })
    </script>
    <!-- Valine Comments end -->







</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        感谢支持
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.jpg" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check" data-wechat="/img/wechat.jpg" data-alipay="/img/alipay.jpg">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style="display:none">
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style="display:none">
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>博客内容遵循 <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span>
        </p>
    </div>
    <div class="bottom">
        <p><span>卢凡凡 &copy; 2015 - 2019</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://beichensky.github.io/20190411/react-mobx-starter/&title=《从零开始搭建一个 React + Mobx + React Router 脚手架》 — 前端小栈&pic=https://beichensky.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://beichensky.github.io/20190411/react-mobx-starter/&title=《从零开始搭建一个 React + Mobx + React Router 脚手架》 — 前端小栈&source=本文详细介绍了如何从零开始搭建一个 React 开发的脚手架，包含如何添加 Redux 以及 React Router 的环境。" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://beichensky.github.io/20190411/react-mobx-starter/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《从零开始搭建一个 React + Mobx + React Router 脚手架》 — 前端小栈&url=https://beichensky.github.io/20190411/react-mobx-starter/&via=https://beichensky.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://beichensky.github.io/20190411/react-mobx-starter/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="//api.qrserver.com/v1/create-qr-code/?data=https://beichensky.github.io/20190411/react-mobx-starter/" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>






<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = '前端小栈';
            clearTimeout(titleTime);
        } else {
            document.title = '前端小栈';
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script>



</body>
</html>
